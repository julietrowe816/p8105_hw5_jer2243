---
title: "p8105_hw5_jer2243"
author: "Juliet Rowe"
date: "2023-11-06"
output: github_document
---

## Problem 2

```{r}
library(tidyverse)
library(rvest)
```


Importing and tidying the data
```{r}
names = list.files(path="data", full.names=TRUE)

readin_csv = function(path) {
  
  df = 
    read_csv(path) |>
    janitor::clean_names() |>
    mutate(
      ident = path
    ) |>
    separate(ident, into=c("e", "arm", "e2", "id", "csv"), sep=c(5, 8, 9, 11)) |>
  arrange(arm, id) |>
  pivot_longer(week_1:week_8,
               names_to = "week",
               values_to = "value") |>
  separate(week, into = c("w", "week_no"), sep="_") |>
  select(-e, -e2, -csv, -w)
}

output = map(names, readin_csv) |>
  bind_rows()
```

Spaghetti plot of observations on each subject over time
```{r}
output |> 
  mutate(week_no=as.numeric(week_no)) |>
  ggplot(aes(x = week_no, y = value, color = id)) + geom_line() + facet_wrap(~arm)

```
Overall, the values in the experimental arm increased over the weeks while the values in the control arm stayed around the same or slightly decreased. It looks like the experimental arm saw the biggest jumps from weeks 1-3, while the control group jumped up and down with not much of a pattern over the weeks.

## Problem 3

Generate datasets and save mu hat estimates and p-values
```{r}
sim_mean_ttest = function(mu) {
  
  sim_data = tibble(
    x = rnorm(n=30, mean = mu, sd = 5),
  )

output = data |>
  t.test() |>
  broom::tidy() |>
  select(estimate, p.value) |>
  rename(mu_hat=estimate, pval=p.value)

}
```

Repeat the above for mu = 1, 2, 3, 4, 5, 6
```{r}

```

